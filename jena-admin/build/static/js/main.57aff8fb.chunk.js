(this["webpackJsonpjena-admin"]=this["webpackJsonpjena-admin"]||[]).push([[0],{41:function(e,t,a){e.exports=a(73)},46:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),s=a.n(r),l=a(12),c=(a(46),a(9)),i=a.n(c);i.a.defaults.baseURL="https://us-central1-jenawedding-ecede.cloudfunctions.net/api";var u=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(l.a)(s,2),u=c[0],d=c[1];return o.a.createElement("div",{className:"login"},o.a.createElement("input",{style:{marginTop:"20%"},type:"text",value:a,onChange:function(e){r(e.target.value)}}),o.a.createElement("input",{type:"text",value:u,onChange:function(e){d(e.target.value)}}),o.a.createElement("button",{onClick:function(){i.a.post("/login",{email:a,password:u}).then((function(e){localStorage.setItem("Authorization","Bearer "+e.data.token),window.location.href="/"})).catch((function(e){console.log(e)}))}},"Login"))},d=a(30),h=a(31),g=a(32),m=a(39),p=a(33),f=a(40),v=a(34),y=a.n(v);a(66);function E(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),i=Object(l.a)(c,2),u=i[0],d=i[1];return o.a.createElement("div",{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)}},o.a.createElement("hr",null),o.a.createElement("div",{style:{display:"block"}},o.a.createElement("div",{style:{float:"right",display:"flex",justifyItems:"center"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},u?o.a.createElement("input",{style:{width:"100px",height:"10px",marginBottom:"5px",marginRight:"20px"},value:r,placeholder:"Enter Guest to Add",onChange:function(e){return s(e.target.value)}}):null,o.a.createElement("button",{style:{marginRight:"20px",width:"100px",fontSize:"8px"},onClick:function(){e.add(e.party,r),console.log(e.party)}},"Add Guest to Party")),o.a.createElement("button",{style:{marginRight:"20px"},onClick:function(){e.call(e.id)}},"Delete"),e.attending?o.a.createElement("div",{style:{display:"inline-block",width:"20px",height:"20px",backgroundColor:"green"}}):o.a.createElement("div",{style:{display:"inline-block",width:"20px",height:"20px",backgroundColor:"red"}})),o.a.createElement("h3",null,e.name)),o.a.createElement("hr",null))}var w=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={guests:[],latestParty:0,searchName:"",searchedGuests:[],addGuest:"",error:"",rsvpCount:0,guestCount:0},a.loadGuests=function(){i.a.get("/getGuests",{headers:{Authorization:localStorage.Authorization}}).then((function(e){var t=0,n=0;a.setState({guests:e.data.guests}),console.log("Success!"),a.setState({latestParty:e.data.guests.sort((function(e,t){return e.party-t.party}))[e.data.guests.length-1].party+1}),a.state.guests.forEach((function(e){t++,e.attending&&n++})),a.setState({guestCount:t,rsvpCount:n}),console.log(a.state.latestParty)})).catch((function(e){"Error: Request failed with status code 403"===e&&(window.location.href="/login")}))},a.capitalize=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.split(" "),n=[];return a.forEach((function(t){var a=t[0].toUpperCase()+t.substring(1,e.length);n.push(a)})),t?n.join(" "):n.join("%20")},a.searchName=function(){if(""!==a.state.searchName.trim()&&void 0!==a.state.searchName){var e=a.capitalize(a.state.searchName);console.log(e),i.a.get("/guests/".concat(e)).then((function(e){a.setState({error:""}),a.setState({searchedGuests:e.data.members}),a.setState({searchName:""}),console.log(a.state.searchedGuests)})).catch((function(e){a.setState({error:"Guest not Found"}),console.log(e)}))}},a.textChange=function(e){a.setState(Object(d.a)({},e.target.name,e.target.value))},a.deleteGuest=function(e){i.a.delete("/deleteGuest/".concat(e),{headers:{Authorization:localStorage.Authorization}}).then((function(t){console.log("Success! "+e+" Deleted!");var n=a.state.searchedGuests.filter((function(t){return t.docId!==e}));console.log(n),a.setState({searchedGuests:n})})).catch((function(e){console.log(e),403===e.status&&(window.location.href="/login")}))},a.addGuest=function(){if(""!==a.state.addGuest.trim()&&void 0!==a.state.addGuest){var e={name:a.capitalize(a.state.addGuest,!0),party:a.state.latestParty};i.a.post("/addGuest",e,{headers:{Authorization:localStorage.Authorization}}).then((function(e){console.log("Success!"),a.setState({addGuest:""})})).catch((function(e){console.log(e),403===e.response.status&&(console.log(),window.location.href="/login")}))}},a.addGuestToParty=function(e,t){var n={name:a.capitalize(t,!0),party:e};i.a.post("/addGuest",n,{headers:{Authorization:localStorage.Authorization}}).then((function(e){console.log("Success!"),a.setState({addGuest:""})})).catch((function(e){console.log(e),403===e.response.status&&(console.log(),window.location.href="/login")}))},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){if(localStorage.Authorization){var e=y()(localStorage.Authorization.split("Bearer ")[1]);localStorage.Authorization?1e3*e.exp<Date.now()&&(window.location.href="/login"):window.location.href="/login",this.loadGuests()}else window.location.href="/login"}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"home"},o.a.createElement("label",null,"Search Guest"),o.a.createElement("div",{style:{display:"flex",flowDirection:"row"}},o.a.createElement("input",{style:{marginRight:"20px"},type:"text",placeholder:"Search",name:"searchName",value:this.state.searchName,onChange:this.textChange}),o.a.createElement("button",{onClick:this.searchName},"Search")),o.a.createElement("div",{className:"mainBody"},o.a.createElement("div",{style:{overflow:"auto",height:"500px",width:"100%"}},this.state.guests.map((function(t){return o.a.createElement(E,{add:e.addGuestToParty,party:t.party,call:e.deleteGuest,id:t.docId,key:t.docId,name:t.name,attending:t.attending})}))),o.a.createElement("div",{style:{width:"100%",textAlign:"center"}},o.a.createElement("h5",{style:{color:"red"}},this.state.error),this.state.searchedGuests.map((function(t){return o.a.createElement(E,{add:e.addGuestToParty,party:t.party,call:e.deleteGuest,id:t.docId,key:t.docId,name:t.name,attending:t.attending})})))),o.a.createElement("div",{style:{display:"flex",flowDirection:"row"}},o.a.createElement("input",{style:{marginRight:"20px"},type:"text",placeholder:"Add Guest",name:"addGuest",value:this.state.addGuest,onChange:this.textChange}),o.a.createElement("button",{onClick:this.addGuest},"Add Guest")),o.a.createElement("h3",null,"RSVP Count: ",this.state.rsvpCount),o.a.createElement("h3",null,"Total Guests Invited ",this.state.guestCount))}}]),t}(n.Component),G=a(35),S=a(10);a(67);var b=function(){return o.a.createElement("div",{className:"main"},o.a.createElement(G.a,null,o.a.createElement(S.c,null,o.a.createElement(S.a,{exact:!0,path:"/login"},o.a.createElement(u,null)),o.a.createElement(S.a,{exact:!0,path:"/"},o.a.createElement(w,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=a(11),O=a(38),C=Object(x.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return!0;case"LOGOUT":return!1;default:return e}}}),j=Object(x.c)(C,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(o.a.createElement(O.a,{store:j},o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.57aff8fb.chunk.js.map