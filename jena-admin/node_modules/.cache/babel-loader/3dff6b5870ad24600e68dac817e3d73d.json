{"ast":null,"code":"import _defineProperty from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import jwtDecode from\"jwt-decode\";import\"./Styles/home.css\";import axios from\"axios\";import Guest from\"../Components/guests\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);function Home(){var _getPrototypeOf2;var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Home)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={guests:[],latestParty:0,searchName:\"\",searchedGuests:[],addGuest:\"\",error:\"\",rsvpCount:0,guestCount:0};_this.loadGuests=function(){axios.get(\"/getGuests\",{headers:{'Authorization':localStorage.Authorization}}).then(function(data){var guestCount=0;var rsvpCount=0;_this.setState({guests:data.data.guests});console.log(\"Success!\");_this.setState({latestParty:data.data.guests.sort(function(a,b){return a.party-b.party;})[data.data.guests.length-1].party+1});_this.state.guests.forEach(function(guest){guestCount++;if(guest.attending){rsvpCount++;}});_this.setState({guestCount:guestCount,rsvpCount:rsvpCount});console.log(_this.state.latestParty);}).catch(function(err){if(err===\"Error: Request failed with status code 403\"){window.location.href=\"/login\";}});};_this.capitalize=function(name){var nP=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var nameList=name.split(' ');var newNameList=[];nameList.forEach(function(n){var newName=n[0].toUpperCase()+n.substring(1,name.length);newNameList.push(newName);});if(nP){return newNameList.join(' ');}else{return newNameList.join('%20');}};_this.searchName=function(){if(_this.state.searchName.trim()!==\"\"&&_this.state.searchName!==undefined){var name=_this.capitalize(_this.state.searchName);console.log(name);axios.get(\"/guests/\".concat(name)).then(function(res){_this.setState({error:\"\"});_this.setState({searchedGuests:res.data.members});_this.setState({searchName:\"\"});console.log(_this.state.searchedGuests);}).catch(function(err){_this.setState({error:\"Guest not Found\"});console.log(err);});}};_this.textChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.deleteGuest=function(id){axios.delete(\"/deleteGuest/\".concat(id),{headers:{'Authorization':localStorage.Authorization}}).then(function(res){console.log(\"Success! \"+id+\" Deleted!\");var updated=_this.state.searchedGuests.filter(function(pers){return pers.docId!==id;});console.log(updated);_this.setState({searchedGuests:updated});}).catch(function(err){console.log(err);if(err.status===403){window.location.href=\"/login\";}});};_this.addGuest=function(){if(_this.state.addGuest.trim()!==\"\"&&_this.state.addGuest!==undefined){var guest={name:_this.capitalize(_this.state.addGuest,true),party:_this.state.latestParty};axios.post(\"/addGuest\",guest,{headers:{'Authorization':localStorage.Authorization}}).then(function(res){console.log(\"Success!\");_this.setState({addGuest:\"\"});}).catch(function(err){console.log(err);if(err.response.status===403){console.log();window.location.href=\"/login\";}});}};_this.addGuestToParty=function(party,guestName){var guest={name:_this.capitalize(guestName,true),party:party};axios.post(\"/addGuest\",guest,{headers:{'Authorization':localStorage.Authorization}}).then(function(res){console.log(\"Success!\");_this.setState({addGuest:\"\"});}).catch(function(err){console.log(err);if(err.response.status===403){console.log();window.location.href=\"/login\";}});};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.Authorization){var decodedToken=jwtDecode(localStorage.Authorization.split(\"Bearer \")[1]);if(localStorage.Authorization){if(decodedToken.exp*1000<Date.now()){window.location.href=\"/login\";}}else{window.location.href=\"/login\";}this.loadGuests();}else{window.location.href=\"/login\";}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"home\"},React.createElement(\"label\",null,\"Search Guest\"),React.createElement(\"div\",{style:{display:\"flex\",flowDirection:\"row\"}},React.createElement(\"input\",{style:{marginRight:\"20px\"},type:\"text\",placeholder:\"Search\",name:\"searchName\",value:this.state.searchName,onChange:this.textChange}),React.createElement(\"button\",{onClick:this.searchName},\"Search\")),React.createElement(\"div\",{className:\"mainBody\"},React.createElement(\"div\",{style:{overflow:\"auto\",height:\"500px\",width:\"100%\"}},this.state.guests.map(function(guest){return React.createElement(Guest,{add:_this2.addGuestToParty,party:guest.party,call:_this2.deleteGuest,id:guest.docId,key:guest.docId,name:guest.name,attending:guest.attending});})),React.createElement(\"div\",{style:{width:\"100%\",textAlign:\"center\"}},React.createElement(\"h5\",{style:{color:\"red\"}},this.state.error),this.state.searchedGuests.map(function(guest){return React.createElement(Guest,{add:_this2.addGuestToParty,party:guest.party,call:_this2.deleteGuest,id:guest.docId,key:guest.docId,name:guest.name,attending:guest.attending});}))),React.createElement(\"div\",{style:{display:\"flex\",flowDirection:\"row\"}},React.createElement(\"input\",{style:{marginRight:\"20px\"},type:\"text\",placeholder:\"Add Guest\",name:\"addGuest\",value:this.state.addGuest,onChange:this.textChange}),React.createElement(\"button\",{onClick:this.addGuest},\"Add Guest\")),React.createElement(\"h3\",null,\"RSVP Count: \",this.state.rsvpCount),React.createElement(\"h3\",null,\"Total Guests Invited \",this.state.guestCount));}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jena-admin/src/Screens/home.js"],"names":["React","Component","jwtDecode","axios","Guest","Home","state","guests","latestParty","searchName","searchedGuests","addGuest","error","rsvpCount","guestCount","loadGuests","get","headers","localStorage","Authorization","then","data","setState","console","log","sort","a","b","party","length","forEach","guest","attending","catch","err","window","location","href","capitalize","name","nP","nameList","split","newNameList","n","newName","toUpperCase","substring","push","join","trim","undefined","res","members","textChange","e","target","value","deleteGuest","id","delete","updated","filter","pers","docId","status","post","response","addGuestToParty","guestName","decodedToken","exp","Date","now","display","flowDirection","marginRight","overflow","height","width","map","textAlign","color"],"mappings":"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","sourcesContent":["import React,{Component} from 'react'\nimport jwtDecode from \"jwt-decode\"\nimport \"./Styles/home.css\"\nimport axios from \"axios\"\nimport Guest from \"../Components/guests\"\n\nclass Home extends Component {\n    state = {\n        guests: [],\n        latestParty: 0,\n        searchName: \"\",\n        searchedGuests: [],\n        addGuest: \"\",\n        error: \"\",\n        rsvpCount: 0,\n        guestCount: 0\n\n    }\n    loadGuests = () => {\n        axios.get(\"/getGuests\",{headers: {'Authorization':localStorage.Authorization}})\n        .then(data=> {\n            let guestCount = 0\n            let rsvpCount = 0\n            this.setState({guests: data.data.guests})\n            console.log(\"Success!\")\n            this.setState({latestParty: \n                data.data.guests.sort((a,b) => {\n                    return a.party-b.party\n                })[data.data.guests.length-1].party + 1\n            })\n            this.state.guests.forEach((guest)=> {\n                guestCount++\n                if (guest.attending) {\n                    rsvpCount++\n                }\n            })\n            this.setState({guestCount, rsvpCount})\n            console.log(this.state.latestParty)\n        }).catch(err=>{\n            if (err === \"Error: Request failed with status code 403\") {\n                window.location.href=\"/login\"\n            }\n        })\n    }\n\n    capitalize = (name, nP=false) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        if (nP) {\n            return newNameList.join(' ')\n        } else {\n            return newNameList.join('%20')\n        }\n    }\n\n    searchName=()=>{\n        if (this.state.searchName.trim() !== \"\" && this.state.searchName !== undefined) {\n        const name = this.capitalize(this.state.searchName)\n        console.log(name)\n        axios.get(`/guests/${name}`)\n        .then(res=> {\n            this.setState({error: \"\"})\n            this.setState({searchedGuests: res.data.members})\n            this.setState({searchName: \"\"})\n            console.log(this.state.searchedGuests)\n        })\n        .catch(err=> {\n            this.setState({error: \"Guest not Found\"})\n            console.log(err)\n        })\n    }\n    }\n\n    textChange = (e) => {\n        this.setState({\n            [e.target.name]:e.target.value\n        })\n    }\n\n    deleteGuest=(id)=> {\n        axios.delete(`/deleteGuest/${id}`, {headers: {'Authorization': localStorage.Authorization}})\n        .then(res=>{\n            console.log(\"Success! \" + id + \" Deleted!\")\n            const updated = this.state.searchedGuests.filter(pers=> pers.docId !== id)\n            console.log(updated)\n            this.setState({\n                searchedGuests: updated\n            })\n        })\n        .catch(err=>{\n            console.log(err)\n            if (err.status===403) {\n                window.location.href=\"/login\"\n            }\n        })\n    }\n\n    addGuest = () => {\n        if (this.state.addGuest.trim() !== \"\" && this.state.addGuest !== undefined) {\n        const guest = {\n            name: this.capitalize(this.state.addGuest, true),\n            party: this.state.latestParty\n        }\n        axios.post(\"/addGuest\", guest, {headers: {'Authorization': localStorage.Authorization}})\n        .then(res => {\n            console.log(\"Success!\")\n            this.setState({addGuest:\"\"})\n        })\n        .catch(err=>{\n            console.log(err)\n            if (err.response.status === 403) {\n                console.log()\n                window.location.href=\"/login\"\n            }\n        })\n    }\n    }\n\n    addGuestToParty = (party, guestName) => {\n            const guest = {\n                name: this.capitalize(guestName, true),\n                party: party\n            }\n            axios.post(\"/addGuest\", guest, {headers: {'Authorization': localStorage.Authorization}})\n            .then(res => {\n                console.log(\"Success!\")\n                this.setState({addGuest:\"\"})\n            })\n            .catch(err=>{\n                console.log(err)\n                if (err.response.status === 403) {\n                    console.log()\n                    window.location.href=\"/login\"\n                }\n            })\n    }\n\n    componentDidMount() {\n        if (localStorage.Authorization) {\n        const decodedToken = jwtDecode(localStorage.Authorization.split(\"Bearer \")[1])\n        \n        if (localStorage.Authorization) {\n            if (decodedToken.exp *1000 < Date.now()) {    \n                window.location.href = \"/login\"\n            }\n        } else {\n            window.location.href = \"/login\"\n        }\n        this.loadGuests()\n    } else {\n        window.location.href = \"/login\"\n    }\n    }\n\n    render() {\n        return (\n            <div className=\"home\">\n                <label>Search Guest</label>\n                <div style={{display:\"flex\",flowDirection:\"row\"}}>\n                    <input style={{marginRight:\"20px\"}} type=\"text\" placeholder=\"Search\" name=\"searchName\" value={this.state.searchName} onChange={this.textChange}/>\n                    <button onClick={this.searchName}>Search</button>\n                </div>\n                <div className=\"mainBody\">\n                    <div style={{overflow:\"auto\", height: \"500px\",width: \"100%\"}}>\n                        {this.state.guests.map((guest)=> \n                            <Guest add={this.addGuestToParty} party={guest.party} call={this.deleteGuest} id={guest.docId}key={guest.docId} name={guest.name} attending={guest.attending}/>\n                        )}\n                    </div>\n                    <div style={{width: \"100%\", textAlign: \"center\"}}>\n                        <h5 style={{color:\"red\"}}>{this.state.error}</h5>\n                        {this.state.searchedGuests.map(guest=> \n                            <Guest add={this.addGuestToParty} party={guest.party} call={this.deleteGuest} id={guest.docId} key={guest.docId} name={guest.name} attending={guest.attending} />\n                        )}\n                    </div>\n                </div>\n                <div style={{display:\"flex\",flowDirection:\"row\"}}>\n                    <input style={{marginRight:\"20px\"}} type=\"text\" placeholder=\"Add Guest\" name=\"addGuest\" value={this.state.addGuest} onChange={this.textChange}/>\n                    <button onClick={this.addGuest}>Add Guest</button>\n                </div>\n                <h3>RSVP Count: {this.state.rsvpCount}</h3>\n                <h3>Total Guests Invited {this.state.guestCount}</h3>\n            </div>\n        )\n    }\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}