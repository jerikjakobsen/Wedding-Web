{"ast":null,"code":"import _defineProperty from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Guest from'../components/guest';import axios from'axios';import'../Rsvp.css';import TextField from'@material-ui/core/TextField';axios.defaults.baseURL=\"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\";/*  TODO: Write a function to go through the searched name\n    and capitalize the first letter of first/middle/last name\n    (All names in database are capitalized)\n*/var Rsvp=/*#__PURE__*/function(_Component){_inherits(Rsvp,_Component);function Rsvp(){var _this;_classCallCheck(this,Rsvp);_this=_possibleConstructorReturn(this,_getPrototypeOf(Rsvp).call(this));_this.searchChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.capitalize=function(name){var nameList=name.split(' ');var newNameList=[];nameList.forEach(function(n){var newName=n[0].toUpperCase()+n.substring(1,name.length);newNameList.push(newName);});return newNameList.join(' ');};_this.searchName=function(){var name=_this.capitalize(_this.state.search).replace(' ','%20');axios.get(\"guests/\".concat(name),{withCredentials:true}).then(function(res){if(res){_this.setState({originalAttendeesList:res.data.members,partyAttendees:res.data.members,error:''});}}).catch(function(err){console.error(err);_this.setState({error:\"\".concat(_this.state.search,\" not found, please contact Jena to ask about an RSVP. Thank-you!\")});});};_this.guestRsvpCallBack=function(data){var newList=_this.state.partyAttendees.filter(function(person){return person.name!==data.name;});newList.push(data);var sortedNewList=newList.sort(function(a,b){return a.name>b.name?1:-1;});_this.setState({partyAttendees:sortedNewList});};_this.onUnload=function(){var _this$state=_this.state,partyAttendees=_this$state.partyAttendees,originalAttendeesList=_this$state.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('guests',{party:_this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}};_this.state={search:'',originalAttendeesList:[],partyAttendees:[],error:''};return _this;}_createClass(Rsvp,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){var _this$state2=this.state,partyAttendees=_this$state2.partyAttendees,originalAttendeesList=_this$state2.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('guests',{party:this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}}},{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"beforeunload\",this.onUnload);}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{style:{textAlign:'center'}},React.createElement(\"div\",{style:{marginBottom:'10%'}},React.createElement(TextField,{onChange:this.searchChange,value:this.state.search,name:\"search\",autoFocus:true,type:\"text\",label:\"Search Name\"}),React.createElement(\"button\",{className:\"searchButton\",onClick:this.searchName},\"Search\"),React.createElement(\"p\",{className:\"error\"},this.state.error)),React.createElement(\"div\",{style:{marginBottom:'40px'}},this.state.partyAttendees.map(function(pers,i){return React.createElement(Guest,{callback:_this2.guestRsvpCallBack,key:i,party:pers.party,attending:pers.attending,name:pers.name});})));}}]);return Rsvp;}(Component);export default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","axios","TextField","defaults","baseURL","Rsvp","searchChange","event","target","name","value","setState","capitalize","nameList","split","newNameList","forEach","n","newName","toUpperCase","substring","length","push","join","searchName","state","search","replace","get","withCredentials","then","res","originalAttendeesList","data","members","partyAttendees","error","catch","err","console","guestRsvpCallBack","newList","filter","person","sortedNewList","sort","a","b","onUnload","JSON","stringify","post","party","log","window","addEventListener","textAlign","marginBottom","map","pers","i","attending"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport axios from 'axios'\nimport '../Rsvp.css'\nimport TextField from '@material-ui/core/TextField';\n\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\"\n/*  TODO: Write a function to go through the searched name\n    and capitalize the first letter of first/middle/last name\n    (All names in database are capitalized)\n*/\n\n\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: ''\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    capitalize = (name) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        return newNameList.join(' ')\n    }\n\n    searchName = () => {\n    const name = this.capitalize(this.state.search).replace(' ', '%20')        \n        axios.get(`guests/${name}`, {withCredentials: true})\n        .then((res) => {\n            if (res) {\n            this.setState({\n                originalAttendeesList: res.data.members,\n                partyAttendees: res.data.members,\n                error: ''\n            })\n        }\n        })\n        .catch(err => {\n            console.error(err)\n            this.setState({error: `${this.state.search} not found, please contact Jena to ask about an RSVP. Thank-you!`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        const sortedNewList = newList.sort((a,b)=> (a.name > b.name ? 1 : -1))\n        this.setState({partyAttendees: sortedNewList})\n    }\n\n    onUnload = () => {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        }\n    }\n    componentWillUnmount() {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        } \n    }\n\n\n    componentDidMount() {\n        window.addEventListener(\"beforeunload\", this.onUnload)\n    }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <div style={{marginBottom: '10%'}}>\n                    <TextField onChange={this.searchChange} value={this.state.search} name='search' autoFocus = {true} type='text' label='Search Name' />\n                    <button className='searchButton' onClick={this.searchName}>Search</button>\n                    <p className='error'>{this.state.error}</p>\n                </div>\n                <div style ={{marginBottom: '40px'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback ={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}