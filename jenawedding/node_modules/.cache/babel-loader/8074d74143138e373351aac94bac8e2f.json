{"ast":null,"code":"var _jsxFileName = \"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js\";\nimport React, { Component } from 'react';\nimport Guest from '../components/guest';\nimport axios from 'axios';\nimport '../Rsvp.css';\nimport TextField from '@material-ui/core/TextField';\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\";\n\nclass Rsvp extends Component {\n  constructor() {\n    super();\n\n    this.searchChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.capitalize = name => {\n      const nameList = name.split(' ');\n      const newNameList = [];\n      nameList.forEach(n => {\n        const newName = n[0].toUpperCase() + n.substring(1, name.length);\n        newNameList.push(newName);\n      });\n      return newNameList.join(' ');\n    };\n\n    this.searchName = () => {\n      this.setState({\n        loading: true\n      });\n      const name = this.capitalize(this.state.search).replace(' ', '%20');\n      axios.get(`guests/${name}`, () => {\n        return {\n          withCredentials: true\n        };\n      }).then(res => {\n        if (res) {\n          this.setState({\n            originalAttendeesList: res.data.members,\n            partyAttendees: res.data.members,\n            error: ''\n          });\n          this.setState({\n            loading: false,\n            loaded: true\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          loading: false,\n          loaded: false\n        });\n        console.error(err);\n        this.setState({\n          error: `${this.state.search} not found`\n        });\n      });\n    };\n\n    this.guestRsvpCallBack = data => {\n      const newList = this.state.partyAttendees.filter(person => person.name !== data.name);\n      newList.push(data);\n      this.setState({\n        partyAttendees: newList.sort((a, b) => a.name > b.name ? 1 : -1)\n      });\n    };\n\n    this.submitRSVP = () => {\n      const _this$state = this.state,\n            partyAttendees = _this$state.partyAttendees,\n            originalAttendeesList = _this$state.originalAttendeesList;\n\n      if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n        axios.post('guests', {\n          party: this.state.partyAttendees[0].party,\n          members: partyAttendees\n        }).then(() => {\n          console.log(\"Guest information successfully changed!\");\n        }).catch(err => {\n          console.error(err);\n        });\n      } else {\n        console.log(\"Guest hasn't made any changes!\");\n      }\n    };\n\n    this.submitEmail = () => {\n      axios.post('/email', {\n        email: this.state.email.trim()\n      }).then(() => {\n        console.log(\"Email Saved\");\n        this.setState({\n          email: \"\",\n          emailError: false\n        });\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          emailError: true\n        });\n      });\n    };\n\n    this.state = {\n      search: '',\n      originalAttendeesList: [],\n      partyAttendees: [],\n      error: '',\n      loading: false,\n      loaded: false,\n      email: \"\",\n      emailError: false\n    };\n  }\n\n  // onUnload = () => {\n  //     const {partyAttendees, originalAttendeesList} = this.state\n  //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n  //         axios.post('guests',{\n  //             party: this.state.partyAttendees[0].party,\n  //             members: partyAttendees\n  //         })\n  //         .then(() => {\n  //             console.log(\"Guest information successfully changed!\")\n  //         })\n  //         .catch(err => {\n  //             console.error(err)\n  //         })\n  //     } else {\n  //         console.log(\"Guest hasn't made any changes!\")\n  //     }\n  // }\n  componentWillUnmount() {\n    const _this$state2 = this.state,\n          partyAttendees = _this$state2.partyAttendees,\n          originalAttendeesList = _this$state2.originalAttendeesList;\n\n    if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n      axios.post('guests', {\n        party: this.state.partyAttendees[0].party,\n        members: partyAttendees\n      }).then(() => {\n        console.log(\"Guest information successfully changed!\");\n      }).catch(err => {\n        console.error(err);\n      });\n    } else {\n      console.log(\"Guest hasn't made any changes!\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        float: \"left\",\n        marginLeft: \"5%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\",\n        width: \"300px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"If you'd like to recieve email updates on date changes, please enter your email here\"), React.createElement(TextField, {\n      size: \"small\",\n      onChange: this.searchChange,\n      value: this.state.email,\n      name: \"email\",\n      type: \"text\",\n      label: \"Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      style: {\n        width: \"80px\",\n        marginLeft: \"20px\"\n      },\n      className: \"searchButton\",\n      onClick: this.submitEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Submit\"), this.state.emailError ? React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\",\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Something went wrong! Please try again\") : null, React.createElement(\"p\", {\n      className: \"centerText\",\n      style: {\n        display: \"block\",\n        width: \"400px\",\n        fontFamily: \"Barlow Condensed\",\n        fontStyle: \"italic\",\n        fontSize: \"24px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Due to the coronavirus outbreak, there is an increasing possibility that the wedding will be postponed, however, as of today, it is proceeding as usual.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), \"The health of you and your loved ones always comes first! If you are no longer able to or feel uncomfortable attending attending, please let us know as soon as possible - No later than May 15th - so we can update our relevant vendors.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), \"Thank you and stay safe.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), \"Love,\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), \"Matthew and Jenafer\")), React.createElement(\"div\", {\n      style: {\n        marginBottom: '10%',\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginRight: \"10%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.searchChange,\n      value: this.state.search,\n      name: \"search\",\n      autoFocus: true,\n      type: \"text\",\n      label: \"Search Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      disabled: this.state.loading,\n      className: \"searchButton\",\n      onClick: this.searchName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Please enter your first and last name. If you cannot find your name, enter another guest in your party's name. Then press Search\"), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"If you are experiencing difficulties using this page or have any questions please reach out to the couple at \", React.createElement(\"span\", {\n      style: {\n        color: \"red\",\n        fontStyle: \"bold\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"mattandjenaswedding@gmail.com\")), this.state.loading ? React.createElement(\"div\", {\n      className: \"loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sk-chase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }))) : null, React.createElement(\"div\", {\n      style: {\n        marginBottom: '40px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, this.state.partyAttendees.map((pers, i) => {\n      return React.createElement(Guest, {\n        callback: this.guestRsvpCallBack,\n        key: i,\n        party: pers.party,\n        attending: pers.attending,\n        name: pers.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      });\n    }), React.createElement(\"div\", {\n      style: {\n        marginTop: \"50px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, this.state.loaded ? React.createElement(\"button\", {\n      onClick: this.submitRSVP,\n      className: \"searchButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Submit RSVP\") : null, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        flowDirection: \"row\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","axios","TextField","defaults","baseURL","Rsvp","constructor","searchChange","event","target","name","value","setState","capitalize","nameList","split","newNameList","forEach","n","newName","toUpperCase","substring","length","push","join","searchName","loading","state","search","replace","get","withCredentials","then","res","originalAttendeesList","data","members","partyAttendees","error","loaded","catch","err","console","guestRsvpCallBack","newList","filter","person","sort","a","b","submitRSVP","JSON","stringify","post","party","log","submitEmail","email","trim","emailError","componentWillUnmount","render","textAlign","float","marginLeft","fontFamily","width","color","display","fontStyle","fontSize","marginBottom","flexDirection","justifyContent","marginRight","map","pers","i","attending","marginTop","flowDirection"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,aAAP;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AAEAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyB,8DAAzB;;AAIA,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;AACzBO,EAAAA,WAAW,GAAG;AACV;;AADU,SAcdC,YAdc,GAcEC,KAAD,IAAW;AAAA,4BACAA,KAAK,CAACC,MADN;AAAA,YACfC,IADe,iBACfA,IADe;AAAA,YACTC,KADS,iBACTA,KADS;AAEtB,WAAKC,QAAL,CAAc;AACV,SAACF,IAAD,GAAQC;AADE,OAAd;AAGH,KAnBa;;AAAA,SAqBdE,UArBc,GAqBAH,IAAD,IAAU;AACnB,YAAMI,QAAQ,GAAGJ,IAAI,CAACK,KAAL,CAAW,GAAX,CAAjB;AACA,YAAMC,WAAW,GAAG,EAApB;AACAF,MAAAA,QAAQ,CAACG,OAAT,CAAiBC,CAAC,IAAI;AAClB,cAAMC,OAAO,GAAGD,CAAC,CAAC,CAAD,CAAD,CAAKE,WAAL,KAAqBF,CAAC,CAACG,SAAF,CAAY,CAAZ,EAAeX,IAAI,CAACY,MAApB,CAArC;AACAN,QAAAA,WAAW,CAACO,IAAZ,CAAiBJ,OAAjB;AACH,OAHD;AAIA,aAAOH,WAAW,CAACQ,IAAZ,CAAiB,GAAjB,CAAP;AACH,KA7Ba;;AAAA,SA+BdC,UA/Bc,GA+BD,MAAM;AACf,WAAKb,QAAL,CAAc;AAACc,QAAAA,OAAO,EAAE;AAAV,OAAd;AACA,YAAMhB,IAAI,GAAG,KAAKG,UAAL,CAAgB,KAAKc,KAAL,CAAWC,MAA3B,EAAmCC,OAAnC,CAA2C,GAA3C,EAAgD,KAAhD,CAAb;AACA5B,MAAAA,KAAK,CAAC6B,GAAN,CAAW,UAASpB,IAAK,EAAzB,EAA4B,MAAI;AAC5B,eAAO;AAACqB,UAAAA,eAAe,EAAE;AAAlB,SAAP;AACH,OAFD,EAGCC,IAHD,CAGOC,GAAD,IAAS;AACX,YAAIA,GAAJ,EAAS;AACT,eAAKrB,QAAL,CAAc;AACVsB,YAAAA,qBAAqB,EAAED,GAAG,CAACE,IAAJ,CAASC,OADtB;AAEVC,YAAAA,cAAc,EAAEJ,GAAG,CAACE,IAAJ,CAASC,OAFf;AAGVE,YAAAA,KAAK,EAAE;AAHG,WAAd;AAKA,eAAK1B,QAAL,CAAc;AAACc,YAAAA,OAAO,EAAE,KAAV;AAAiBa,YAAAA,MAAM,EAAE;AAAzB,WAAd;AACH;AACA,OAZD,EAaCC,KAbD,CAaOC,GAAG,IAAI;AACV,aAAK7B,QAAL,CAAc;AAACc,UAAAA,OAAO,EAAE,KAAV;AAAiBa,UAAAA,MAAM,EAAE;AAAzB,SAAd;AACAG,QAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;AACA,aAAK7B,QAAL,CAAc;AAAC0B,UAAAA,KAAK,EAAG,GAAE,KAAKX,KAAL,CAAWC,MAAO;AAA7B,SAAd;AACH,OAjBD;AAkBH,KApDa;;AAAA,SAsDde,iBAtDc,GAsDMR,IAAI,IAAI;AACxB,YAAMS,OAAO,GAAG,KAAKjB,KAAL,CAAWU,cAAX,CAA0BQ,MAA1B,CAAiCC,MAAM,IAAIA,MAAM,CAACpC,IAAP,KAAgByB,IAAI,CAACzB,IAAhE,CAAhB;AACAkC,MAAAA,OAAO,CAACrB,IAAR,CAAaY,IAAb;AACA,WAAKvB,QAAL,CAAc;AAACyB,QAAAA,cAAc,EAAEO,OAAO,CAACG,IAAR,CAAa,CAACC,CAAD,EAAGC,CAAH,KAASD,CAAC,CAACtC,IAAF,GAASuC,CAAC,CAACvC,IAAX,GAAkB,CAAlB,GAAsB,CAAC,CAA7C;AAAjB,OAAd;AACH,KA1Da;;AAAA,SAgGdwC,UAhGc,GAgGD,MAAM;AAAA,0BACiC,KAAKvB,KADtC;AAAA,YACRU,cADQ,eACRA,cADQ;AAAA,YACQH,qBADR,eACQA,qBADR;;AAEf,UAAIiB,IAAI,CAACC,SAAL,CAAef,cAAf,MAAmCc,IAAI,CAACC,SAAL,CAAelB,qBAAf,CAAvC,EAA8E;AAC1EjC,QAAAA,KAAK,CAACoD,IAAN,CAAW,QAAX,EAAoB;AAChBC,UAAAA,KAAK,EAAE,KAAK3B,KAAL,CAAWU,cAAX,CAA0B,CAA1B,EAA6BiB,KADpB;AAEhBlB,UAAAA,OAAO,EAAEC;AAFO,SAApB,EAICL,IAJD,CAIM,MAAM;AACRU,UAAAA,OAAO,CAACa,GAAR,CAAY,yCAAZ;AACH,SAND,EAOCf,KAPD,CAOOC,GAAG,IAAI;AACVC,UAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;AACH,SATD;AAUH,OAXD,MAWO;AACHC,QAAAA,OAAO,CAACa,GAAR,CAAY,gCAAZ;AACH;AACJ,KAhHa;;AAAA,SAkHdC,WAlHc,GAkHA,MAAM;AAChBvD,MAAAA,KAAK,CAACoD,IAAN,CAAW,QAAX,EAAqB;AACjBI,QAAAA,KAAK,EAAE,KAAK9B,KAAL,CAAW8B,KAAX,CAAiBC,IAAjB;AADU,OAArB,EAEG1B,IAFH,CAEQ,MAAK;AACTU,QAAAA,OAAO,CAACa,GAAR,CAAY,aAAZ;AACA,aAAK3C,QAAL,CAAc;AAAC6C,UAAAA,KAAK,EAAE,EAAR;AAAYE,UAAAA,UAAU,EAAE;AAAxB,SAAd;AACH,OALD,EAKGnB,KALH,CAKUC,GAAD,IAAQ;AACbC,QAAAA,OAAO,CAACa,GAAR,CAAYd,GAAZ;AACA,aAAK7B,QAAL,CAAc;AAAC+C,UAAAA,UAAU,EAAE;AAAb,SAAd;AACH,OARD;AASH,KA5Ha;;AAEV,SAAKhC,KAAL,GAAW;AACPC,MAAAA,MAAM,EAAE,EADD;AAEPM,MAAAA,qBAAqB,EAAE,EAFhB;AAGPG,MAAAA,cAAc,EAAE,EAHT;AAIPC,MAAAA,KAAK,EAAE,EAJA;AAKPZ,MAAAA,OAAO,EAAE,KALF;AAMPa,MAAAA,MAAM,EAAE,KAND;AAOPkB,MAAAA,KAAK,EAAE,EAPA;AAQPE,MAAAA,UAAU,EAAE;AARL,KAAX;AAUH;;AAgDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAC,EAAAA,oBAAoB,GAAG;AAAA,yBAC6B,KAAKjC,KADlC;AAAA,UACZU,cADY,gBACZA,cADY;AAAA,UACIH,qBADJ,gBACIA,qBADJ;;AAEnB,QAAIiB,IAAI,CAACC,SAAL,CAAef,cAAf,MAAmCc,IAAI,CAACC,SAAL,CAAelB,qBAAf,CAAvC,EAA8E;AAC1EjC,MAAAA,KAAK,CAACoD,IAAN,CAAW,QAAX,EAAoB;AAChBC,QAAAA,KAAK,EAAE,KAAK3B,KAAL,CAAWU,cAAX,CAA0B,CAA1B,EAA6BiB,KADpB;AAEhBlB,QAAAA,OAAO,EAAEC;AAFO,OAApB,EAICL,IAJD,CAIM,MAAM;AACRU,QAAAA,OAAO,CAACa,GAAR,CAAY,yCAAZ;AACH,OAND,EAOCf,KAPD,CAOOC,GAAG,IAAI;AACVC,QAAAA,OAAO,CAACJ,KAAR,CAAcG,GAAd;AACH,OATD;AAUH,KAXD,MAWO;AACHC,MAAAA,OAAO,CAACa,GAAR,CAAY,gCAAZ;AACH;AACJ;;AAgCDM,EAAAA,MAAM,GAAG;AACL,WACI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,KAAK,EAAE,MAAR;AAAgBC,QAAAA,UAAU,EAAE;AAA5B,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE,kBAAb;AAAiCC,QAAAA,KAAK,EAAE;AAAxC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8FADJ,EAII,oBAAC,SAAD;AAAW,MAAA,IAAI,EAAC,OAAhB;AAAwB,MAAA,QAAQ,EAAE,KAAK3D,YAAvC;AAAqD,MAAA,KAAK,EAAE,KAAKoB,KAAL,CAAW8B,KAAvE;AAA8E,MAAA,IAAI,EAAC,OAAnF;AAA2F,MAAA,IAAI,EAAC,MAAhG;AAAuG,MAAA,KAAK,EAAC,OAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EAKI;AAAQ,MAAA,KAAK,EAAE;AAACS,QAAAA,KAAK,EAAE,MAAR;AAAgBF,QAAAA,UAAU,EAAE;AAA5B,OAAf;AAAoD,MAAA,SAAS,EAAC,cAA9D;AAA6E,MAAA,OAAO,EAAE,KAAKR,WAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,EAMK,KAAK7B,KAAL,CAAWgC,UAAX,GAAwB;AAAG,MAAA,KAAK,EAAE;AAACM,QAAAA,UAAU,EAAE,kBAAb;AAAiCE,QAAAA,KAAK,EAAE;AAAxC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAAxB,GAA8H,IANnI,EAOI;AAAG,MAAA,SAAS,EAAC,YAAb;AAA0B,MAAA,KAAK,EAAE;AAACC,QAAAA,OAAO,EAAE,OAAV;AAAmBF,QAAAA,KAAK,EAAE,OAA1B;AAAmCD,QAAAA,UAAU,EAAE,kBAA/C;AAAmEI,QAAAA,SAAS,EAAE,QAA9E;AAAwFC,QAAAA,QAAQ,EAAE;AAAlG,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mKAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,EAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJA,gPAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARA,EASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATA,8BAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXA,EAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZA,WAaK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbL,wBAPJ,CADJ,EAyBI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,YAAY,EAAE,KAAf;AAAsBH,QAAAA,OAAO,EAAE,MAA/B;AAAsCI,QAAAA,aAAa,EAAE,KAArD;AAA4DC,QAAAA,cAAc,EAAE;AAA5E,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,WAAW,EAAE;AAAd,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,SAAD;AAAW,MAAA,QAAQ,EAAE,KAAKnE,YAA1B;AAAwC,MAAA,KAAK,EAAE,KAAKoB,KAAL,CAAWC,MAA1D;AAAkE,MAAA,IAAI,EAAC,QAAvE;AAAgF,MAAA,SAAS,EAAI,IAA7F;AAAmG,MAAA,IAAI,EAAC,MAAxG;AAA+G,MAAA,KAAK,EAAC,aAArH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,CADJ,EAII;AAAQ,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWD,OAA7B;AAAsC,MAAA,SAAS,EAAC,cAAhD;AAA+D,MAAA,OAAO,EAAE,KAAKD,UAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,CAzBJ,EA+BI;AAAG,MAAA,KAAK,EAAE;AAACwC,QAAAA,UAAU,EAAE;AAAb,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0IA/BJ,EAgCI;AAAG,MAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB,KAAKtC,KAAL,CAAWW,KAAjC,CAhCJ,EAiCI;AAAG,MAAA,KAAK,EAAE;AAAC2B,QAAAA,UAAU,EAAE;AAAb,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wHACiH;AAAM,MAAA,KAAK,EAAE;AAACE,QAAAA,KAAK,EAAE,KAAR;AAAeE,QAAAA,SAAS,EAAE;AAA1B,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADjH,CAjCJ,EAqCK,KAAK1C,KAAL,CAAWD,OAAX,GACD;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,EAII;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EAKI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,EAMI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANJ,CADJ,CADC,GAWC,IAhDN,EAiDI;AAAK,MAAA,KAAK,EAAG;AAAC6C,QAAAA,YAAY,EAAE;AAAf,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAK5C,KAAL,CAAWU,cAAX,CAA0BsC,GAA1B,CAA8B,CAACC,IAAD,EAAMC,CAAN,KAAY;AACvC,aAAO,oBAAC,KAAD;AAAO,QAAA,QAAQ,EAAE,KAAKlC,iBAAtB;AAAyC,QAAA,GAAG,EAAEkC,CAA9C;AAAiD,QAAA,KAAK,EAAED,IAAI,CAACtB,KAA7D;AAAoE,QAAA,SAAS,EAAEsB,IAAI,CAACE,SAApF;AAA+F,QAAA,IAAI,EAAEF,IAAI,CAAClE,IAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH,KAFA,CADL,EAII;AAAK,MAAA,KAAK,EAAE;AAACqE,QAAAA,SAAS,EAAE;AAAZ,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,KAAKpD,KAAL,CAAWY,MAAX,GACD;AAAQ,MAAA,OAAO,EAAE,KAAKW,UAAtB;AAAkC,MAAA,SAAS,EAAC,cAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADC,GAED,IAHA,EAKA;AAAK,MAAA,KAAK,EAAE;AAACkB,QAAAA,OAAO,EAAE,MAAV;AAAkBK,QAAAA,cAAc,EAAC,QAAjC;AAA0CO,QAAAA,aAAa,EAAE;AAAzD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALA,CAJJ,CAjDJ,CADJ;AAiEH;;AAjMwB;;AAoM7B,eAAe3E,IAAf","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport axios from 'axios'\nimport '../Rsvp.css'\nimport TextField from '@material-ui/core/TextField';\n\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\"\n\n\n\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: '',\n            loading: false,\n            loaded: false,\n            email: \"\",\n            emailError: false\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    capitalize = (name) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        return newNameList.join(' ')\n    }\n\n    searchName = () => {\n        this.setState({loading: true})\n        const name = this.capitalize(this.state.search).replace(' ', '%20')        \n        axios.get(`guests/${name}`, ()=>{\n            return {withCredentials: true}\n        })\n        .then((res) => {\n            if (res) {\n            this.setState({\n                originalAttendeesList: res.data.members,\n                partyAttendees: res.data.members,\n                error: ''\n            })\n            this.setState({loading: false, loaded: true})\n        }\n        })\n        .catch(err => {\n            this.setState({loading: false, loaded: false})\n            console.error(err)\n            this.setState({error: `${this.state.search} not found`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        this.setState({partyAttendees: newList.sort((a,b)=> (a.name > b.name ? 1 : -1))})\n    }\n\n    // onUnload = () => {\n    //     const {partyAttendees, originalAttendeesList} = this.state\n    //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n    //         axios.post('guests',{\n    //             party: this.state.partyAttendees[0].party,\n    //             members: partyAttendees\n    //         })\n    //         .then(() => {\n    //             console.log(\"Guest information successfully changed!\")\n    //         })\n    //         .catch(err => {\n    //             console.error(err)\n    //         })\n    //     } else {\n    //         console.log(\"Guest hasn't made any changes!\")\n    //     }\n    // }\n    \n    componentWillUnmount() {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        } \n    }\n\n    submitRSVP = () => {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        }\n    }\n\n    submitEmail = () => {\n        axios.post('/email', {\n            email: this.state.email.trim()\n        }).then(()=> {\n            console.log(\"Email Saved\")\n            this.setState({email: \"\", emailError: false})\n        }).catch((err)=> {\n            console.log(err)\n            this.setState({emailError: true})\n        })\n    }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <div style={{float: \"left\", marginLeft: \"5%\"}}>\n                    <p style={{fontFamily: \"Barlow Condensed\", width: \"300px\"}}>\n                        If you'd like to recieve email updates on date changes, please enter your email here\n                    </p>\n                    <TextField size=\"small\" onChange={this.searchChange} value={this.state.email} name=\"email\" type='text' label=\"Email\" />\n                    <button style={{width: \"80px\", marginLeft: \"20px\"}} className=\"searchButton\" onClick={this.submitEmail}>Submit</button>\n                    {this.state.emailError ? <p style={{fontFamily: \"Barlow Condensed\", color: \"red\"}}>Something went wrong! Please try again</p>: null}\n                    <p className=\"centerText\" style={{display: \"block\", width: \"400px\", fontFamily: \"Barlow Condensed\", fontStyle: \"italic\", fontSize: \"24px\"}}>\n                    Due to the coronavirus outbreak, there is an increasing possibility \n                    that the wedding will be postponed, however, as of today, it is proceeding as usual.\n                    <br/>\n                    <br/>\n                    The health of you and your loved ones always comes first!\n                    If you are no longer able to or feel uncomfortable attending attending, please let us know as soon as possible - No later than May 15th\n                    - so we can update our relevant vendors.\n                    <br/>\n                    <br/>\n                    Thank you and stay safe.\n                    <br/>\n                    <br/>\n                    Love,<br/>\n                    Matthew and Jenafer\n                    </p>\n                </div>\n                <div style={{marginBottom: '10%', display: \"flex\",flexDirection: \"row\", justifyContent: \"center\"}}>\n                    <div style={{marginRight: \"10%\"}}>\n                    <TextField onChange={this.searchChange} value={this.state.search} name='search' autoFocus = {true} type='text' label='Search Name' />\n                    </div>\n                    <button disabled={this.state.loading} className='searchButton' onClick={this.searchName}>Search</button>\n                </div>\n                <p style={{fontFamily: \"Barlow Condensed\"}}>Please enter your first and last name. If you cannot find your name, enter another guest in your party's name. Then press Search</p>\n                <p className='error'>{this.state.error}</p>\n                <p style={{fontFamily: \"Barlow Condensed\"}}>\n                    If you are experiencing difficulties using this page or have any questions please reach out to the couple at <span style={{color: \"red\", fontStyle: \"bold\"}}>mattandjenaswedding@gmail.com</span>\n                </p>\n                \n                {this.state.loading?\n                <div className=\"loader\">\n                    <div className=\"sk-chase\">\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                    </div>\n                </div>\n                : null}\n                <div style ={{marginBottom: '40px'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                    <div style={{marginTop: \"50px\"}}>\n                    {this.state.loaded ? \n                    <button onClick={this.submitRSVP} className=\"searchButton\">Submit RSVP</button> : \n                    null\n                    }\n                    <div style={{display: \"flex\", justifyContent:\"center\",flowDirection: \"row\"}} >\n                </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}