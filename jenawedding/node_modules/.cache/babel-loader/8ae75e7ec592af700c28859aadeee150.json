{"ast":null,"code":"import _defineProperty from\"/Users/Jenas/Desktop/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Jenas/Desktop/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Jenas/Desktop/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Jenas/Desktop/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Jenas/Desktop/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Jenas/Desktop/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Guest from'../components/guest';import Button from'@material-ui/core/Button';import axios from'axios';import'../Rsvp.css';/*  TODO: Write a function to go through the searched name\n    and capitalize the first letter of first/middle/last name\n    (All names in database are capitalized)\n*/var Rsvp=/*#__PURE__*/function(_Component){_inherits(Rsvp,_Component);function Rsvp(){var _this;_classCallCheck(this,Rsvp);_this=_possibleConstructorReturn(this,_getPrototypeOf(Rsvp).call(this));_this.searchChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.searchName=function(){var name=_this.state.search.replace(' ','%20');axios.get(\"/guests/\".concat(name)).then(function(res){_this.setState({originalAttendeesList:res.data.members.sort(function(a,b){return a.name>b.name?1:-1;}),partyAttendees:res.data.members.sort(function(a,b){return a.name>b.name?1:-1;}),error:''});}).catch(function(err){console.error(err);_this.setState({error:\"\".concat(_this.state.search,\" not found, please contact Jena to ask about an RSVP. Thank-you!\")});});};_this.guestRsvpCallBack=function(data){var newList=_this.state.partyAttendees.filter(function(person){return person.name!==data.name;});newList.push(data);var sortedNewList=newList.sort(function(a,b){return a.name>b.name?1:-1;});_this.setState({partyAttendees:sortedNewList});};_this.onUnload=function(){var _this$state=_this.state,partyAttendees=_this$state.partyAttendees,originalAttendeesList=_this$state.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('/guests',{party:_this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}};_this.state={search:'',originalAttendeesList:[],partyAttendees:[],error:''};return _this;}_createClass(Rsvp,[{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"beforeunload\",this.onUnload);}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{style:{textAlign:'center'}},React.createElement(\"div\",{style:{marginBottom:'10%'}},React.createElement(\"input\",{className:\"search\",onChange:this.searchChange,value:this.state.search,name:\"search\",type:\"text\",placeholder:\"Search your name to RSVP\"}),React.createElement(Button,{className:\"searchButton\",onClick:this.searchName,variant:\"contained\"},\"Search\"),React.createElement(\"p\",{className:\"error\"},this.state.error)),React.createElement(\"div\",{style:{marginBottom:'40px'}},this.state.partyAttendees.map(function(pers,i){return React.createElement(Guest,{callback:_this2.guestRsvpCallBack,key:i,party:pers.party,attending:pers.attending,name:pers.name});})));}}]);return Rsvp;}(Component);export default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","Button","axios","Rsvp","searchChange","event","target","name","value","setState","searchName","state","search","replace","get","then","res","originalAttendeesList","data","members","sort","a","b","partyAttendees","error","catch","err","console","guestRsvpCallBack","newList","filter","person","push","sortedNewList","onUnload","JSON","stringify","post","party","log","window","addEventListener","textAlign","marginBottom","map","pers","i","attending"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport Button from '@material-ui/core/Button'\nimport axios from 'axios'\nimport '../Rsvp.css'\n\n/*  TODO: Write a function to go through the searched name\n    and capitalize the first letter of first/middle/last name\n    (All names in database are capitalized)\n*/\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: ''\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    searchName = () => {\n        const name = this.state.search.replace(' ', '%20')\n        axios.get(`/guests/${name}`)\n        .then((res) => {\n            this.setState({\n                originalAttendeesList: res.data.members.sort((a,b)=> (a.name > b.name ? 1 : -1)),\n                partyAttendees: res.data.members.sort((a,b)=> (a.name > b.name ? 1 : -1)),\n                error: ''\n            })\n        })\n        .catch(err => {\n            console.error(err)\n            this.setState({error: `${this.state.search} not found, please contact Jena to ask about an RSVP. Thank-you!`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        const sortedNewList = newList.sort((a,b)=> (a.name > b.name ? 1 : -1))\n        this.setState({partyAttendees: sortedNewList})\n    }\n\n    onUnload = () => {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('/guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener(\"beforeunload\", this.onUnload)\n    }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <div style={{marginBottom: '10%'}}>\n                    <input className='search' onChange={this.searchChange} value={this.state.search} name='search' type='text' placeholder='Search your name to RSVP' />\n                    <Button className='searchButton' onClick={this.searchName} variant=\"contained\">Search</Button>\n                    <p className='error'>{this.state.error}</p>\n                </div>\n                <div style ={{marginBottom: '40px'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback ={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}