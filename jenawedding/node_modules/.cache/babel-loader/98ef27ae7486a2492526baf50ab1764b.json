{"ast":null,"code":"import _defineProperty from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Guest from'../components/guest';import axios from'axios';import'../Rsvp.css';import TextField from'@material-ui/core/TextField';axios.defaults.baseURL=\"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\";var Rsvp=/*#__PURE__*/function(_Component){_inherits(Rsvp,_Component);function Rsvp(){var _this;_classCallCheck(this,Rsvp);_this=_possibleConstructorReturn(this,_getPrototypeOf(Rsvp).call(this));_this.searchChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.capitalize=function(name){var nameList=name.split(' ');var newNameList=[];nameList.forEach(function(n){var newName=n[0].toUpperCase()+n.substring(1,name.length);newNameList.push(newName);});return newNameList.join(' ');};_this.searchName=function(){_this.setState({loading:true});var name=_this.capitalize(_this.state.search).replace(' ','%20');axios.get(\"guests/\".concat(name),function(){return{withCredentials:true};}).then(function(res){if(res){_this.setState({originalAttendeesList:res.data.members,partyAttendees:res.data.members,error:''});_this.setState({loading:false,loaded:true});}}).catch(function(err){_this.setState({loading:false,loaded:false});console.error(err);_this.setState({error:\"\".concat(_this.state.search,\" not found\")});});};_this.guestRsvpCallBack=function(data){var newList=_this.state.partyAttendees.filter(function(person){return person.name!==data.name;});newList.push(data);_this.setState({partyAttendees:newList.sort(function(a,b){return a.name>b.name?1:-1;})});};_this.submitRSVP=function(){var _this$state=_this.state,partyAttendees=_this$state.partyAttendees,originalAttendeesList=_this$state.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('guests',{party:_this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}};_this.submitEmail=function(){axios.post('/email',{email:_this.state.email.trim()}).then(function(){console.log(\"Email Saved\");_this.setState({email:\"\",emailError:false});}).catch(function(err){console.log(err);_this.setState({emailError:true});});};_this.state={search:'',originalAttendeesList:[],partyAttendees:[],error:'',loading:false,loaded:false,email:\"\",emailError:false};return _this;}_createClass(Rsvp,[{key:\"componentWillUnmount\",// onUnload = () => {\n//     const {partyAttendees, originalAttendeesList} = this.state\n//     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n//         axios.post('guests',{\n//             party: this.state.partyAttendees[0].party,\n//             members: partyAttendees\n//         })\n//         .then(() => {\n//             console.log(\"Guest information successfully changed!\")\n//         })\n//         .catch(err => {\n//             console.error(err)\n//         })\n//     } else {\n//         console.log(\"Guest hasn't made any changes!\")\n//     }\n// }\nvalue:function componentWillUnmount(){var _this$state2=this.state,partyAttendees=_this$state2.partyAttendees,originalAttendeesList=_this$state2.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('guests',{party:this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{style:{textAlign:'center'}},React.createElement(\"div\",{style:{float:\"left\",marginLeft:\"5%\"}},React.createElement(\"p\",{style:{fontFamily:\"Barlow Condensed\",width:\"300px\"}},\"If you'd like to recieve email updates on date changes, please enter your email here\"),React.createElement(TextField,{size:\"small\",onChange:this.searchChange,value:this.state.email,name:\"email\",type:\"text\",label:\"Email\"}),React.createElement(\"button\",{style:{width:\"80px\",marginLeft:\"20px\"},className:\"searchButton\",onClick:this.submitEmail},\"Submit\"),this.state.emailError?React.createElement(\"p\",{style:{fontFamily:\"Barlow Condensed\",color:\"red\"}},\"Something went wrong! Please try again\"):null,React.createElement(\"p\",{className:\"centerText\",style:{display:\"block\",width:\"400px\",fontFamily:\"Barlow Condensed\",fontStyle:\"italic\",fontSize:\"24px\"}},\"Due to the coronavirus outbreak, there is an increasing possibility that the wedding will be postponed, however, as of today, it is proceeding as usual.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"The health of you and your loved ones always comes first! If you are no longer able to or feel uncomfortable attending attending, please let us know as soon as possible - No later than May 15th - so we can update our relevant vendors.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Thank you and stay safe.\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Love,\",React.createElement(\"br\",null),\"Matthew and Jenafer\")),React.createElement(\"div\",{style:{marginBottom:'10%',display:\"flex\",flexDirection:\"row\",justifyContent:\"center\"}},React.createElement(\"div\",{style:{marginRight:\"10%\"}},React.createElement(TextField,{onChange:this.searchChange,value:this.state.search,name:\"search\",autoFocus:true,type:\"text\",label:\"Search Name\"})),React.createElement(\"button\",{disabled:this.state.loading,className:\"searchButton\",onClick:this.searchName},\"Search\")),React.createElement(\"p\",{style:{fontFamily:\"Barlow Condensed\"}},\"Please enter your first and last name and click Search. \",React.createElement(\"br\",null),\"If you're unable to find your name, enter another guest in your party's name.\"),React.createElement(\"p\",{className:\"error\"},this.state.error),React.createElement(\"p\",{style:{fontFamily:\"Barlow Condensed\"}},\"If you are experiencing difficulties using this page or have any questions please reach out to the couple at \",React.createElement(\"span\",{style:{color:\"red\",fontStyle:\"bold\"}},\"mattandjenaswedding@gmail.com\")),this.state.loading?React.createElement(\"div\",{className:\"loader\"},React.createElement(\"div\",{className:\"sk-chase\"},React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}))):null,React.createElement(\"div\",{style:{marginBottom:'40px'}},this.state.partyAttendees.map(function(pers,i){return React.createElement(Guest,{callback:_this2.guestRsvpCallBack,key:i,party:pers.party,attending:pers.attending,name:pers.name});}),React.createElement(\"div\",{style:{marginTop:\"50px\"}},this.state.loaded?React.createElement(\"button\",{onClick:this.submitRSVP,className:\"searchButton\"},\"Submit RSVP\"):null,React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"center\",flowDirection:\"row\"}}))));}}]);return Rsvp;}(Component);export default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","axios","TextField","defaults","baseURL","Rsvp","searchChange","event","target","name","value","setState","capitalize","nameList","split","newNameList","forEach","n","newName","toUpperCase","substring","length","push","join","searchName","loading","state","search","replace","get","withCredentials","then","res","originalAttendeesList","data","members","partyAttendees","error","loaded","catch","err","console","guestRsvpCallBack","newList","filter","person","sort","a","b","submitRSVP","JSON","stringify","post","party","log","submitEmail","email","trim","emailError","textAlign","float","marginLeft","fontFamily","width","color","display","fontStyle","fontSize","marginBottom","flexDirection","justifyContent","marginRight","map","pers","i","attending","marginTop","flowDirection"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport axios from 'axios'\nimport '../Rsvp.css'\nimport TextField from '@material-ui/core/TextField';\n\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\"\n\n\n\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: '',\n            loading: false,\n            loaded: false,\n            email: \"\",\n            emailError: false\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    capitalize = (name) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        return newNameList.join(' ')\n    }\n\n    searchName = () => {\n        this.setState({loading: true})\n        const name = this.capitalize(this.state.search).replace(' ', '%20')        \n        axios.get(`guests/${name}`, ()=>{\n            return {withCredentials: true}\n        })\n        .then((res) => {\n            if (res) {\n            this.setState({\n                originalAttendeesList: res.data.members,\n                partyAttendees: res.data.members,\n                error: ''\n            })\n            this.setState({loading: false, loaded: true})\n        }\n        })\n        .catch(err => {\n            this.setState({loading: false, loaded: false})\n            console.error(err)\n            this.setState({error: `${this.state.search} not found`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        this.setState({partyAttendees: newList.sort((a,b)=> (a.name > b.name ? 1 : -1))})\n    }\n\n    // onUnload = () => {\n    //     const {partyAttendees, originalAttendeesList} = this.state\n    //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n    //         axios.post('guests',{\n    //             party: this.state.partyAttendees[0].party,\n    //             members: partyAttendees\n    //         })\n    //         .then(() => {\n    //             console.log(\"Guest information successfully changed!\")\n    //         })\n    //         .catch(err => {\n    //             console.error(err)\n    //         })\n    //     } else {\n    //         console.log(\"Guest hasn't made any changes!\")\n    //     }\n    // }\n    \n    componentWillUnmount() {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        } \n    }\n\n    submitRSVP = () => {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        }\n    }\n\n    submitEmail = () => {\n        axios.post('/email', {\n            email: this.state.email.trim()\n        }).then(()=> {\n            console.log(\"Email Saved\")\n            this.setState({email: \"\", emailError: false})\n        }).catch((err)=> {\n            console.log(err)\n            this.setState({emailError: true})\n        })\n    }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <div style={{float: \"left\", marginLeft: \"5%\"}}>\n                    <p style={{fontFamily: \"Barlow Condensed\", width: \"300px\"}}>\n                        If you'd like to recieve email updates on date changes, please enter your email here\n                    </p>\n                    <TextField size=\"small\" onChange={this.searchChange} value={this.state.email} name=\"email\" type='text' label=\"Email\" />\n                    <button style={{width: \"80px\", marginLeft: \"20px\"}} className=\"searchButton\" onClick={this.submitEmail}>Submit</button>\n                    {this.state.emailError ? <p style={{fontFamily: \"Barlow Condensed\", color: \"red\"}}>Something went wrong! Please try again</p>: null}\n                    <p className=\"centerText\" style={{display: \"block\", width: \"400px\", fontFamily: \"Barlow Condensed\", fontStyle: \"italic\", fontSize: \"24px\"}}>\n                    Due to the coronavirus outbreak, there is an increasing possibility \n                    that the wedding will be postponed, however, as of today, it is proceeding as usual.\n                    <br/>\n                    <br/>\n                    The health of you and your loved ones always comes first!\n                    If you are no longer able to or feel uncomfortable attending attending, please let us know as soon as possible - No later than May 15th\n                    - so we can update our relevant vendors.\n                    <br/>\n                    <br/>\n                    Thank you and stay safe.\n                    <br/>\n                    <br/>\n                    Love,<br/>\n                    Matthew and Jenafer\n                    </p>\n                </div>\n                <div style={{marginBottom: '10%', display: \"flex\",flexDirection: \"row\", justifyContent: \"center\"}}>\n                    <div style={{marginRight: \"10%\"}}>\n                    <TextField onChange={this.searchChange} value={this.state.search} name='search' autoFocus = {true} type='text' label='Search Name' />\n                    </div>\n                    <button disabled={this.state.loading} className='searchButton' onClick={this.searchName}>Search</button>\n                </div>\n                <p style={{fontFamily: \"Barlow Condensed\"}}>Please enter your first and last name and click Search. <br></br>If you're unable to find your name, enter another guest in your party's name.</p>\n                <p className='error'>{this.state.error}</p>\n                <p style={{fontFamily: \"Barlow Condensed\"}}>\n                    If you are experiencing difficulties using this page or have any questions please reach out to the couple at <span style={{color: \"red\", fontStyle: \"bold\"}}>mattandjenaswedding@gmail.com</span>\n                </p>\n                \n                {this.state.loading?\n                <div className=\"loader\">\n                    <div className=\"sk-chase\">\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                    </div>\n                </div>\n                : null}\n                <div style ={{marginBottom: '40px'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                    <div style={{marginTop: \"50px\"}}>\n                    {this.state.loaded ? \n                    <button onClick={this.submitRSVP} className=\"searchButton\">Submit RSVP</button> : \n                    null\n                    }\n                    <div style={{display: \"flex\", justifyContent:\"center\",flowDirection: \"row\"}} >\n                </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}