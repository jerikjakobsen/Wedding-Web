{"ast":null,"code":"import _defineProperty from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Guest from'../components/guest';import axios from'axios';import'../Rsvp.css';import TextField from'@material-ui/core/TextField';axios.defaults.baseURL=\"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\";var Rsvp=/*#__PURE__*/function(_Component){_inherits(Rsvp,_Component);function Rsvp(){var _this;_classCallCheck(this,Rsvp);_this=_possibleConstructorReturn(this,_getPrototypeOf(Rsvp).call(this));_this.searchChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.capitalize=function(name){var nameList=name.split(' ');var newNameList=[];nameList.forEach(function(n){var newName=n[0].toUpperCase()+n.substring(1,name.length);newNameList.push(newName);});return newNameList.join(' ');};_this.searchName=function(){_this.setState({loading:true});var name=_this.capitalize(_this.state.search).replace(' ','%20');axios.get(\"guests/\".concat(name),function(){return{withCredentials:true};}).then(function(res){if(res){_this.setState({originalAttendeesList:res.data.members,partyAttendees:res.data.members,error:''});_this.setState({loading:false,loaded:true});}}).catch(function(err){_this.setState({loading:false,loaded:false});console.error(err);_this.setState({error:\"\".concat(_this.state.search,\" not found, please contact Jena to ask about an RSVP. Thank-you!\")});});};_this.guestRsvpCallBack=function(data){var newList=_this.state.partyAttendees.filter(function(person){return person.name!==data.name;});newList.push(data);_this.setState({partyAttendees:newList.sort(function(a,b){return a.name>b.name?1:-1;})});};_this.submitRSVP=function(){var _this$state=_this.state,partyAttendees=_this$state.partyAttendees,originalAttendeesList=_this$state.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('guests',{party:_this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}};_this.state={search:'',originalAttendeesList:[],partyAttendees:[],error:'',loading:false,loaded:false};return _this;}_createClass(Rsvp,[{key:\"componentWillUnmount\",// onUnload = () => {\n//     const {partyAttendees, originalAttendeesList} = this.state\n//     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n//         axios.post('guests',{\n//             party: this.state.partyAttendees[0].party,\n//             members: partyAttendees\n//         })\n//         .then(() => {\n//             console.log(\"Guest information successfully changed!\")\n//         })\n//         .catch(err => {\n//             console.error(err)\n//         })\n//     } else {\n//         console.log(\"Guest hasn't made any changes!\")\n//     }\n// }\nvalue:function componentWillUnmount(){var _this$state2=this.state,partyAttendees=_this$state2.partyAttendees,originalAttendeesList=_this$state2.originalAttendeesList;if(JSON.stringify(partyAttendees)!==JSON.stringify(originalAttendeesList)){axios.post('guests',{party:this.state.partyAttendees[0].party,members:partyAttendees}).then(function(){console.log(\"Guest information successfully changed!\");}).catch(function(err){console.error(err);});}else{console.log(\"Guest hasn't made any changes!\");}}},{key:\"render\",// componentDidMount() {\n//     window.addEventListener(\"beforeunload\", this.onUnload)\n// }\nvalue:function render(){var _this2=this;return React.createElement(\"div\",{style:{textAlign:'center'}},React.createElement(\"div\",{style:{marginBottom:'10%',display:\"flex\",flexDirection:\"row\",justifyContent:\"center\"}},React.createElement(\"div\",{style:{marginRight:\"10%\"}},React.createElement(TextField,{onChange:this.searchChange,value:this.state.search,name:\"search\",autoFocus:true,type:\"text\",label:\"Search Name\"})),React.createElement(\"button\",{disabled:this.state.loading,className:\"searchButton\",onClick:this.searchName},\"Search\"),React.createElement(\"p\",{className:\"error\"},this.state.error)),this.state.loading?React.createElement(\"div\",{className:\"loader\"},React.createElement(\"div\",{className:\"sk-chase\"},React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}),React.createElement(\"div\",{className:\"sk-chase-dot\"}))):null,React.createElement(\"div\",{style:{marginBottom:'40px'}},this.state.partyAttendees.map(function(pers,i){return React.createElement(Guest,{callback:_this2.guestRsvpCallBack,key:i,party:pers.party,attending:pers.attending,name:pers.name});}),React.createElement(\"div\",{style:{marginTop:\"50px\"}},this.state.loaded?React.createElement(\"button\",{onClick:this.submitRSVP,className:\"searchButton\"},\"Submit RSVP\"):null)));}}]);return Rsvp;}(Component);export default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","axios","TextField","defaults","baseURL","Rsvp","searchChange","event","target","name","value","setState","capitalize","nameList","split","newNameList","forEach","n","newName","toUpperCase","substring","length","push","join","searchName","loading","state","search","replace","get","withCredentials","then","res","originalAttendeesList","data","members","partyAttendees","error","loaded","catch","err","console","guestRsvpCallBack","newList","filter","person","sort","a","b","submitRSVP","JSON","stringify","post","party","log","textAlign","marginBottom","display","flexDirection","justifyContent","marginRight","map","pers","i","attending","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport axios from 'axios'\nimport '../Rsvp.css'\nimport TextField from '@material-ui/core/TextField';\n\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\"\n\n\n\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: '',\n            loading: false,\n            loaded: false\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    capitalize = (name) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        return newNameList.join(' ')\n    }\n\n    searchName = () => {\n        this.setState({loading: true})\n        const name = this.capitalize(this.state.search).replace(' ', '%20')        \n        axios.get(`guests/${name}`, ()=>{\n            return {withCredentials: true}\n        })\n        .then((res) => {\n            if (res) {\n            this.setState({\n                originalAttendeesList: res.data.members,\n                partyAttendees: res.data.members,\n                error: ''\n            })\n            this.setState({loading: false, loaded: true})\n        }\n        })\n        .catch(err => {\n            this.setState({loading: false, loaded: false})\n            console.error(err)\n            this.setState({error: `${this.state.search} not found, please contact Jena to ask about an RSVP. Thank-you!`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        this.setState({partyAttendees: newList.sort((a,b)=> (a.name > b.name ? 1 : -1))})\n    }\n\n    // onUnload = () => {\n    //     const {partyAttendees, originalAttendeesList} = this.state\n    //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n    //         axios.post('guests',{\n    //             party: this.state.partyAttendees[0].party,\n    //             members: partyAttendees\n    //         })\n    //         .then(() => {\n    //             console.log(\"Guest information successfully changed!\")\n    //         })\n    //         .catch(err => {\n    //             console.error(err)\n    //         })\n    //     } else {\n    //         console.log(\"Guest hasn't made any changes!\")\n    //     }\n    // }\n    \n    componentWillUnmount() {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        } \n    }\n\n    submitRSVP = () => {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        }\n    }\n    // componentDidMount() {\n    //     window.addEventListener(\"beforeunload\", this.onUnload)\n    // }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <div style={{marginBottom: '10%', display: \"flex\",flexDirection: \"row\", justifyContent: \"center\"}}>\n                    <div style={{marginRight: \"10%\"}}>\n                    <TextField onChange={this.searchChange} value={this.state.search} name='search' autoFocus = {true} type='text' label='Search Name' />\n                    </div>\n                    <button disabled={this.state.loading} className='searchButton' onClick={this.searchName}>Search</button>\n                    <p className='error'>{this.state.error}</p>\n                </div>\n                {this.state.loading?\n                <div className=\"loader\">\n                    <div className=\"sk-chase\">\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                    </div>\n                </div>\n                : null}\n                <div style ={{marginBottom: '40px'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                    <div style={{marginTop: \"50px\"}}>\n                    {this.state.loaded ? \n                    <button onClick={this.submitRSVP} className=\"searchButton\">Submit RSVP</button> : \n                    null\n                    }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}