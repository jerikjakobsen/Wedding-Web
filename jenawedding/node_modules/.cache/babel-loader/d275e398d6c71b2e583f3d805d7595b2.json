{"ast":null,"code":"var _jsxFileName = \"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js\";\nimport React, { Component } from 'react';\nimport Guest from '../components/guest';\nimport axios from 'axios';\nimport '../Rsvp.css';\nimport TextField from '@material-ui/core/TextField';\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\";\n\nclass Rsvp extends Component {\n  constructor() {\n    super();\n\n    this.searchChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.capitalize = name => {\n      const nameList = name.split(' ');\n      const newNameList = [];\n      nameList.forEach(n => {\n        const newName = n[0].toUpperCase() + n.substring(1, name.length);\n        newNameList.push(newName);\n      });\n      return newNameList.join(' ');\n    };\n\n    this.searchName = () => {\n      this.setState({\n        loading: true,\n        success: false\n      });\n      const name = this.capitalize(this.state.search).replace(' ', '%20');\n      axios.get(`guests/${name}`, () => {\n        return {\n          withCredentials: true\n        };\n      }).then(res => {\n        if (res) {\n          this.setState({\n            originalAttendeesList: res.data.members,\n            partyAttendees: res.data.members,\n            error: ''\n          });\n          this.setState({\n            loading: false,\n            loaded: true\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          loading: false,\n          loaded: false\n        });\n        console.error(err);\n        this.setState({\n          error: `${this.state.search} not found`\n        });\n      });\n    };\n\n    this.guestRsvpCallBack = data => {\n      const newList = this.state.partyAttendees.filter(person => person.name !== data.name);\n      newList.push(data);\n      this.setState({\n        partyAttendees: newList.sort((a, b) => a.name > b.name ? 1 : -1)\n      });\n    };\n\n    this.submitRSVP = () => {\n      const _this$state = this.state,\n            partyAttendees = _this$state.partyAttendees,\n            originalAttendeesList = _this$state.originalAttendeesList;\n      this.setState({\n        loadingSubmit: true\n      });\n\n      if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n        axios.post('guests', {\n          party: this.state.partyAttendees[0].party,\n          members: partyAttendees\n        }).then(() => {\n          console.log(\"Guest information successfully changed!\");\n          this.setState({\n            success: true,\n            loadingSubmit: true\n          });\n        }).catch(err => {\n          console.error(err);\n          this.setState({\n            loadingSubmit: false\n          });\n        });\n      } else {\n        console.log(\"Guest hasn't made any changes!\");\n      }\n    };\n\n    this.submitEmail = () => {\n      this.setState({\n        emailLoading: true\n      });\n      axios.post('/email', {\n        email: this.state.email.trim()\n      }).then(() => {\n        console.log(\"Email Saved\");\n        this.setState({\n          email: \"\",\n          emailError: false,\n          emailLoading: false,\n          emailSuccess: true\n        });\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          emailError: true,\n          emailLoading: false\n        });\n      });\n    };\n\n    this.state = {\n      search: '',\n      originalAttendeesList: [],\n      partyAttendees: [],\n      error: '',\n      loading: false,\n      loaded: false,\n      email: \"\",\n      emailError: false,\n      emailLoading: false,\n      emailSuccess: false,\n      success: false,\n      loadingSubmit: false\n    };\n  }\n\n  // onUnload = () => {\n  //     const {partyAttendees, originalAttendeesList} = this.state\n  //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n  //         axios.post('guests',{\n  //             party: this.state.partyAttendees[0].party,\n  //             members: partyAttendees\n  //         })\n  //         .then(() => {\n  //             console.log(\"Guest information successfully changed!\")\n  //         })\n  //         .catch(err => {\n  //             console.error(err)\n  //         })\n  //     } else {\n  //         console.log(\"Guest hasn't made any changes!\")\n  //     }\n  // }\n  componentWillUnmount() {\n    const _this$state2 = this.state,\n          partyAttendees = _this$state2.partyAttendees,\n          originalAttendeesList = _this$state2.originalAttendeesList;\n\n    if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n      axios.post('guests', {\n        party: this.state.partyAttendees[0].party,\n        members: partyAttendees\n      }).then(() => {\n        console.log(\"Guest information successfully changed!\");\n      }).catch(err => {\n        console.error(err);\n      });\n    } else {\n      console.log(\"Guest hasn't made any changes!\");\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Please enter your first and last name and click Search. \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), \"If you're unable to find your name, enter another guest in your party's name.\"), React.createElement(\"div\", {\n      style: {\n        marginBottom: '2em',\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginRight: \"10%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.searchChange,\n      value: this.state.search,\n      name: \"search\",\n      autoFocus: true,\n      type: \"text\",\n      label: \"Search Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      disabled: this.state.loading,\n      className: \"searchButton\",\n      onClick: this.searchName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Search\")), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\",\n        fontSize: \"18px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"If you are experiencing difficulties using this page or have any questions please reach out to the couple at \", React.createElement(\"span\", {\n      style: {\n        color: \"red\",\n        fontStyle: \"bold\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"mattandjenaswedding@gmail.com\")), this.state.loading ? React.createElement(\"div\", {\n      className: \"loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sk-chase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }))) : null, React.createElement(\"div\", {\n      style: {\n        marginBottom: '3em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, this.state.partyAttendees.map((pers, i) => {\n      return React.createElement(Guest, {\n        callback: this.guestRsvpCallBack,\n        key: i,\n        party: pers.party,\n        attending: pers.attending,\n        name: pers.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      });\n    }), React.createElement(\"div\", {\n      style: {\n        marginTop: \"50px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, this.state.loaded ? React.createElement(\"button\", {\n      onClick: this.submitRSVP,\n      className: \"searchButton\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Submit RSVP\") : null, this.state.success ? React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\",\n        fontSize: \"18px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"Thank you for your submission. You may update your R.S.V.P. status here at any time, before May 15th. \") : null, React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        flowDirection: \"row\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\",\n        display: \"inline-block\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        display: \"block\",\n        width: \"400px\",\n        fontFamily: \"Barlow Condensed\",\n        textAlign: \"center\",\n        fontSize: \"18px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"If you'd like to recieve email updates on date changes, please enter your email here\"), React.createElement(TextField, {\n      size: \"small\",\n      onChange: this.searchChange,\n      value: this.state.email,\n      name: \"email\",\n      type: \"text\",\n      label: \"Email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), this.state.emailLoading ? React.createElement(\"div\", {\n      className: \"loader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sk-chase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }))) : React.createElement(\"button\", {\n      style: {\n        width: \"80px\",\n        marginLeft: \"20px\"\n      },\n      disabled: this.state.emailLoading,\n      className: \"searchButton\",\n      onClick: this.submitEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Submit\"), this.state.emailSuccess ? React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\",\n        color: \"black\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Your email has been saved!\") : null, this.state.emailError ? React.createElement(\"p\", {\n      style: {\n        fontFamily: \"Barlow Condensed\",\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Something went wrong! Please try again\") : null, React.createElement(\"p\", {\n      className: \"centerText\",\n      style: {\n        display: \"block\",\n        width: \"400px\",\n        fontFamily: \"Barlow Condensed\",\n        fontStyle: \"italic\",\n        fontSize: \"24px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"Due to the coronavirus outbreak, there is an increasing possibility that the wedding will be postponed, however, as of today, it is proceeding as usual.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }), \"The health of you and your loved ones always comes first! If you are no longer able to or feel uncomfortable attending, please let us know as soon as possible - No later than May 15th - so we can update our relevant vendors.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }), \"Thank you and stay safe.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }), \"Love,\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), \"Matthew and Jenafer\")));\n  }\n\n}\n\nexport default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","axios","TextField","defaults","baseURL","Rsvp","constructor","searchChange","event","target","name","value","setState","capitalize","nameList","split","newNameList","forEach","n","newName","toUpperCase","substring","length","push","join","searchName","loading","success","state","search","replace","get","withCredentials","then","res","originalAttendeesList","data","members","partyAttendees","error","loaded","catch","err","console","guestRsvpCallBack","newList","filter","person","sort","a","b","submitRSVP","loadingSubmit","JSON","stringify","post","party","log","submitEmail","emailLoading","email","trim","emailError","emailSuccess","componentWillUnmount","render","textAlign","fontFamily","marginBottom","display","flexDirection","justifyContent","marginRight","fontSize","color","fontStyle","map","pers","i","attending","marginTop","flowDirection","width","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport axios from 'axios'\nimport '../Rsvp.css'\nimport TextField from '@material-ui/core/TextField';\n\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\"\n\n\n\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: '',\n            loading: false,\n            loaded: false,\n            email: \"\",\n            emailError: false,\n            emailLoading: false,\n            emailSuccess: false,\n            success: false,\n            loadingSubmit: false\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    capitalize = (name) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        return newNameList.join(' ')\n    }\n\n    searchName = () => {\n        this.setState({loading: true, success: false})\n        const name = this.capitalize(this.state.search).replace(' ', '%20')        \n        axios.get(`guests/${name}`, ()=>{\n            return {withCredentials: true}\n        })\n        .then((res) => {\n            if (res) {\n            this.setState({\n                originalAttendeesList: res.data.members,\n                partyAttendees: res.data.members,\n                error: ''\n            })\n            this.setState({loading: false, loaded: true})\n        }\n        })\n        .catch(err => {\n            this.setState({loading: false, loaded: false})\n            console.error(err)\n            this.setState({error: `${this.state.search} not found`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        this.setState({partyAttendees: newList.sort((a,b)=> (a.name > b.name ? 1 : -1))})\n    }\n\n    // onUnload = () => {\n    //     const {partyAttendees, originalAttendeesList} = this.state\n    //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n    //         axios.post('guests',{\n    //             party: this.state.partyAttendees[0].party,\n    //             members: partyAttendees\n    //         })\n    //         .then(() => {\n    //             console.log(\"Guest information successfully changed!\")\n    //         })\n    //         .catch(err => {\n    //             console.error(err)\n    //         })\n    //     } else {\n    //         console.log(\"Guest hasn't made any changes!\")\n    //     }\n    // }\n    \n    componentWillUnmount() {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        } \n    }\n\n    submitRSVP = () => {\n        const {partyAttendees, originalAttendeesList} = this.state\n        this.setState({loadingSubmit: true})\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n                this.setState({success: true, loadingSubmit: true})\n            })\n            .catch(err => {\n                console.error(err)\n                this.setState({loadingSubmit: false})\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        }\n    }\n\n    submitEmail = () => {\n        this.setState({emailLoading:true})\n        axios.post('/email', {\n            email: this.state.email.trim()\n        }).then(()=> {\n            console.log(\"Email Saved\")\n            this.setState({email: \"\", emailError: false, emailLoading: false, emailSuccess: true})\n        }).catch((err)=> {\n            console.log(err)\n            this.setState({emailError: true, emailLoading: false})\n        })\n    }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <p style={{fontFamily: \"Barlow Condensed\"}}>Please enter your first and last name and click Search. <br></br>If you're unable to find your name, enter another guest in your party's name.</p>\n                <div style={{marginBottom: '2em', display: \"flex\",flexDirection: \"row\", justifyContent: \"center\"}}>\n                    <div style={{marginRight: \"10%\"}}>\n                    <TextField onChange={this.searchChange} value={this.state.search} name='search' autoFocus = {true} type='text' label='Search Name' />\n                    </div>\n                    <button disabled={this.state.loading} className='searchButton' onClick={this.searchName}>Search</button>\n                </div>\n                <p className='error'>{this.state.error}</p>\n                <p style={{fontFamily: \"Barlow Condensed\", fontSize: \"18px\"}}>\n                    If you are experiencing difficulties using this page or have any questions please reach out to the couple at <span style={{color: \"red\", fontStyle: \"bold\"}}>mattandjenaswedding@gmail.com</span>\n                </p>\n                \n                {this.state.loading?\n                <div className=\"loader\">\n                    <div className=\"sk-chase\">\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                        <div className=\"sk-chase-dot\"></div>\n                    </div>\n                </div>\n                : null}\n                <div style ={{marginBottom: '3em'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                    <div style={{marginTop: \"50px\"}}>\n                    {this.state.loaded ? \n                    <button onClick={this.submitRSVP} className=\"searchButton\">Submit RSVP</button> : \n                    null\n                    }\n\n                    {this.state.success ? <p style={{fontFamily: \"Barlow Condensed\", fontSize: \"18px\"}}>Thank you for your submission. You may update your R.S.V.P. status here at any time, before May 15th. </p> : null}\n\n                    <div style={{display: \"flex\", justifyContent:\"center\",flowDirection: \"row\"}} >\n                    </div>\n\n                    </div>\n                </div>\n                <div style={{textAlign: \"center\", display: \"inline-block\"}}>\n                    <p style={{display: \"block\",width: \"400px\",fontFamily: \"Barlow Condensed\",textAlign: \"center\", fontSize: \"18px\"}}>\n                        If you'd like to recieve email updates on date changes, please enter your email here\n                    </p>\n                    <TextField size=\"small\" onChange={this.searchChange} value={this.state.email} name=\"email\" type='text' label=\"Email\" />\n                    {this.state.emailLoading ? \n                        <div className=\"loader\">\n                            <div className=\"sk-chase\">\n                                <div className=\"sk-chase-dot\"></div>\n                                <div className=\"sk-chase-dot\"></div>\n                                <div className=\"sk-chase-dot\"></div>\n                                <div className=\"sk-chase-dot\"></div>\n                                <div className=\"sk-chase-dot\"></div>\n                                <div className=\"sk-chase-dot\"></div>\n                            </div>\n                        </div>\n                        :\n                    <button style={{width: \"80px\", marginLeft: \"20px\"}} disabled={this.state.emailLoading} className=\"searchButton\" onClick={this.submitEmail}>Submit</button>}\n                    {this.state.emailSuccess ? <p style={{fontFamily: \"Barlow Condensed\", color: \"black\"}}>Your email has been saved!</p> : null}\n                    {this.state.emailError ? <p style={{fontFamily: \"Barlow Condensed\", color: \"red\"}}>Something went wrong! Please try again</p>: null}\n                    <p className=\"centerText\" style={{display: \"block\", width: \"400px\", fontFamily: \"Barlow Condensed\", fontStyle: \"italic\", fontSize: \"24px\"}}>\n                    Due to the coronavirus outbreak, there is an increasing possibility \n                    that the wedding will be postponed, however, as of today, it is proceeding as usual.\n                    <br/>\n                    <br/>\n                    The health of you and your loved ones always comes first!\n                    If you are no longer able to or feel uncomfortable attending, please let us know as soon as possible - No later than May 15th\n                    - so we can update our relevant vendors.\n                    <br/>\n                    <br/>\n                    Thank you and stay safe.\n                    <br/>\n                    <br/>\n                    Love,<br/>\n                    Matthew and Jenafer\n                    </p>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}