{"ast":null,"code":"var _jsxFileName = \"/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js\";\nimport React, { Component } from 'react';\nimport Guest from '../components/guest';\nimport axios from 'axios';\nimport '../Rsvp.css';\nimport TextField from '@material-ui/core/TextField';\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\";\n\nclass Rsvp extends Component {\n  constructor() {\n    super();\n\n    this.searchChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.capitalize = name => {\n      const nameList = name.split(' ');\n      const newNameList = [];\n      nameList.forEach(n => {\n        const newName = n[0].toUpperCase() + n.substring(1, name.length);\n        newNameList.push(newName);\n      });\n      return newNameList.join(' ');\n    };\n\n    this.searchName = () => {\n      this.setState({\n        loading: true\n      });\n      const name = this.capitalize(this.state.search).replace(' ', '%20');\n      axios.get(`guests/${name}`, () => {\n        return {\n          withCredentials: true\n        };\n      }).then(res => {\n        if (res) {\n          this.setState({\n            originalAttendeesList: res.data.members,\n            partyAttendees: res.data.members,\n            error: ''\n          });\n          this.setState({\n            loading: false\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          loading: false\n        });\n        console.error(err);\n        this.setState({\n          error: `${this.state.search} not found, please contact Jena to ask about an RSVP. Thank-you!`\n        });\n      });\n    };\n\n    this.guestRsvpCallBack = data => {\n      const newList = this.state.partyAttendees.filter(person => person.name !== data.name);\n      newList.push(data);\n      const sortedNewList = newList.sort((a, b) => a.name > b.name ? 1 : -1);\n      this.setState({\n        partyAttendees: sortedNewList\n      });\n    };\n\n    this.state = {\n      search: '',\n      originalAttendeesList: [],\n      partyAttendees: [],\n      error: '',\n      loading: false\n    };\n  }\n\n  // onUnload = () => {\n  //     const {partyAttendees, originalAttendeesList} = this.state\n  //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n  //         axios.post('guests',{\n  //             party: this.state.partyAttendees[0].party,\n  //             members: partyAttendees\n  //         })\n  //         .then(() => {\n  //             console.log(\"Guest information successfully changed!\")\n  //         })\n  //         .catch(err => {\n  //             console.error(err)\n  //         })\n  //     } else {\n  //         console.log(\"Guest hasn't made any changes!\")\n  //     }\n  // }\n  componentWillUnmount() {\n    const _this$state = this.state,\n          partyAttendees = _this$state.partyAttendees,\n          originalAttendeesList = _this$state.originalAttendeesList;\n\n    if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n      axios.post('guests', {\n        party: this.state.partyAttendees[0].party,\n        members: partyAttendees\n      }).then(() => {\n        console.log(\"Guest information successfully changed!\");\n      }).catch(err => {\n        console.error(err);\n      });\n    } else {\n      console.log(\"Guest hasn't made any changes!\");\n    }\n  } // componentDidMount() {\n  //     window.addEventListener(\"beforeunload\", this.onUnload)\n  // }\n\n\n  render() {\n    return React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginBottom: '10%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      onChange: this.searchChange,\n      value: this.state.search,\n      name: \"search\",\n      autoFocus: true,\n      type: \"text\",\n      label: \"Search Name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"searchButton\",\n      onClick: this.searchName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"Search\"), React.createElement(\"p\", {\n      className: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, this.state.error)), this.state.loading ? React.createElement(\"div\", {\n      class: \"sk-chase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"sk-chase-dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })) : null, React.createElement(\"div\", {\n      style: {\n        marginBottom: '40px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, this.state.partyAttendees.map((pers, i) => {\n      return React.createElement(Guest, {\n        callback: this.guestRsvpCallBack,\n        key: i,\n        party: pers.party,\n        attending: pers.attending,\n        name: pers.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      });\n    })));\n  }\n\n}\n\nexport default Rsvp;","map":{"version":3,"sources":["/Users/Jenas/Desktop/Web Dev/React-Projects/jenawedding/src/Screens/rsvp.js"],"names":["React","Component","Guest","axios","TextField","defaults","baseURL","Rsvp","constructor","searchChange","event","target","name","value","setState","capitalize","nameList","split","newNameList","forEach","n","newName","toUpperCase","substring","length","push","join","searchName","loading","state","search","replace","get","withCredentials","then","res","originalAttendeesList","data","members","partyAttendees","error","catch","err","console","guestRsvpCallBack","newList","filter","person","sortedNewList","sort","a","b","componentWillUnmount","JSON","stringify","post","party","log","render","textAlign","marginBottom","map","pers","i","attending"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Guest from '../components/guest'\nimport axios from 'axios'\nimport '../Rsvp.css'\nimport TextField from '@material-ui/core/TextField';\n\naxios.defaults.baseURL = \"https://us-central1-jenawedding-ecede.cloudfunctions.net/api\"\n\n\n\nclass Rsvp extends Component {\n    constructor() {\n        super()\n        this.state={\n            search: '',\n            originalAttendeesList: [],\n            partyAttendees: [],\n            error: '',\n            loading: false\n        }\n    }\n\n    searchChange = (event) => {\n        const {name, value} = event.target\n        this.setState({\n            [name]: value\n        })\n    }\n\n    capitalize = (name) => {\n        const nameList = name.split(' ')\n        const newNameList = []\n        nameList.forEach(n => {\n            const newName = n[0].toUpperCase() + n.substring(1, name.length)\n            newNameList.push(newName)\n        })\n        return newNameList.join(' ')\n    }\n\n    searchName = () => {\n        this.setState({loading: true})\n        const name = this.capitalize(this.state.search).replace(' ', '%20')        \n        axios.get(`guests/${name}`, ()=>{\n            return {withCredentials: true}\n        })\n        .then((res) => {\n            if (res) {\n            this.setState({\n                originalAttendeesList: res.data.members,\n                partyAttendees: res.data.members,\n                error: ''\n            })\n            this.setState({loading: false})\n        }\n        })\n        .catch(err => {\n            this.setState({loading: false})\n            console.error(err)\n            this.setState({error: `${this.state.search} not found, please contact Jena to ask about an RSVP. Thank-you!`})\n        })\n    }\n\n    guestRsvpCallBack = data => {\n        const newList = this.state.partyAttendees.filter(person => person.name !== data.name)\n        newList.push(data)\n        const sortedNewList = newList.sort((a,b)=> (a.name > b.name ? 1 : -1))\n        this.setState({partyAttendees: sortedNewList})\n    }\n\n    // onUnload = () => {\n    //     const {partyAttendees, originalAttendeesList} = this.state\n    //     if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n    //         axios.post('guests',{\n    //             party: this.state.partyAttendees[0].party,\n    //             members: partyAttendees\n    //         })\n    //         .then(() => {\n    //             console.log(\"Guest information successfully changed!\")\n    //         })\n    //         .catch(err => {\n    //             console.error(err)\n    //         })\n    //     } else {\n    //         console.log(\"Guest hasn't made any changes!\")\n    //     }\n    // }\n    componentWillUnmount() {\n        const {partyAttendees, originalAttendeesList} = this.state\n        if (JSON.stringify(partyAttendees) !== JSON.stringify(originalAttendeesList)) {\n            axios.post('guests',{\n                party: this.state.partyAttendees[0].party,\n                members: partyAttendees\n            })\n            .then(() => {\n                console.log(\"Guest information successfully changed!\")\n            })\n            .catch(err => {\n                console.error(err)\n            })\n        } else {\n            console.log(\"Guest hasn't made any changes!\")\n        } \n    }\n\n\n    // componentDidMount() {\n    //     window.addEventListener(\"beforeunload\", this.onUnload)\n    // }\n\n    render() {\n        return (\n            <div style={{textAlign: 'center'}}>\n                <div style={{marginBottom: '10%'}}>\n                    <TextField onChange={this.searchChange} value={this.state.search} name='search' autoFocus = {true} type='text' label='Search Name' />\n                    <button className='searchButton' onClick={this.searchName}>Search</button>\n                    <p className='error'>{this.state.error}</p>\n                </div>\n                {this.state.loading? \n                <div class=\"sk-chase\">\n                <div class=\"sk-chase-dot\"></div>\n                <div class=\"sk-chase-dot\"></div>\n                <div class=\"sk-chase-dot\"></div>\n                <div class=\"sk-chase-dot\"></div>\n                <div class=\"sk-chase-dot\"></div>\n                <div class=\"sk-chase-dot\"></div>\n                </div>\n                : null}\n                <div style ={{marginBottom: '40px'}}>\n                    {this.state.partyAttendees.map((pers,i) => {\n                        return <Guest callback={this.guestRsvpCallBack} key={i} party={pers.party} attending={pers.attending} name={pers.name} />\n                    })}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Rsvp\n"]},"metadata":{},"sourceType":"module"}